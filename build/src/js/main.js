var Card=function(i){"use strict";this.nbClicks=0,this.game=i};Card.prototype.init=function(){var i=this;$(".cards_list-item").on("click",function(){i.nbClicks++,$(".click-number").text(i.nbClicks),2!=_.size(i.game.visibleCards)&&($(this).hasClass("visible")?($(this).removeClass("visible"),$(this).removeAttr("style"),i.game.emptyArray()):($(this).addClass("visible"),i.game.pushArray(i.game.visibleCards,$(this)),$(this).attr("style","background: url( "+$(this).data("image")+" )"))),2==_.size(i.game.visibleCards)&&i.game.matchCards(i.game.visibleCards[0],i.game.visibleCards[1])})};var Game=function(){"use strict";this.list=$(".cards_list"),this.visibleCards=[]};Game.prototype.init=function(){var i=this,s="src/img/cards",t=".png",a=[];$.ajax({url:s,async:!1,success:function(s){$(s).find("a:contains("+t+")").each(function(){i.pushArray(a,this.title),i.pushArray(a,this.title)})}}),this.createCards(_.size(a));var e=_.shuffle(a),r=0;$(".cards_list-item").each(function(){$(this).attr("data-image","src/img/cards/"+e[r]),r++})},Game.prototype.createCards=function(i){for(var s=0;i>s;s++)this.list.append($("<li class='cards_list-item'></li>"))},Game.prototype.matchCards=function(i,s){var t=i.data("image"),a=s.data("image"),e=this;t==a?_.delay(function(){e.emptyArray(),i.attr("style","background: rgba(0,0,0,.2"),s.attr("style","background: rgba(0,0,0,.2"),i.removeClass("visible").addClass("inactive"),s.removeClass("visible").addClass("inactive"),i.unbind("click"),s.unbind("click")},500):_.delay(function(){e.emptyArray(),i.removeClass("visible"),i.removeAttr("style"),s.removeClass("visible"),s.removeAttr("style")},500)},Game.prototype.emptyArray=function(){for(;!_.isEmpty(this.visibleCards);)this.visibleCards.pop()},Game.prototype.pushArray=function(i,s){i.push(s)},$(document).ready(function(){"use strict";var i=new Game;i.init();var s=new Card(i);s.init()});